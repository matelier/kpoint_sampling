import{d as A,t as C,av as b,a3 as x,y as v,C as E,o as K,b as B,f as I}from"../modules/vue-Dd4cOx9T.js";import{p as N}from"./chunk-OWSVF5RT-LiNBzAhj.js";import{J as T,K as q,L as P,b as R}from"../index-KhvaAkgB.js";import{u as w}from"./context-rzIALyUe.js";const D=A({__name:"KaTexBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},at:{type:[String,Number],default:"+1"}},setup(y){const e=y,{$clicksContext:t}=w(),l=C(),u=T();return b(()=>{t.unregister(u)}),x(()=>{var d;if(!t||t.disabled||!((d=e.ranges)!=null&&d.length))return;const{start:o,end:f,delta:S}=t.resolve(e.at,e.ranges.length-1);t.register(u,{max:f,delta:S});const g=v(()=>t.disabled?e.ranges.length-1:Math.max(0,t.current-o+1)),p=v(()=>e.finally==="last"?e.ranges.at(-1):e.finally.toString());E(()=>{if(!l.value)return;let i=e.ranges[g.value]??p.value;const m=i==="hide";l.value.classList.toggle(q,m),m&&(i=e.ranges[g.value+1]??p.value);const h=l.value.querySelectorAll(".mtable > [class*=col-align]");if(!h)return;const L=Array.from(h).map(a=>Array.from(a.querySelectorAll(":scope > .vlist-t > .vlist-r > .vlist > span > .mord"))),r=[];for(const a of L)a.forEach((n,s)=>{n&&(Array.isArray(r[s])?r[s].push(n):r[s]=[n])});const _=e.startLine,k=N(r.length+_-1,i);r.forEach((a,n)=>{const s=k.includes(n+_);a.forEach(c=>{c.classList.toggle(P,!0),c.classList.toggle("highlighted",s),c.classList.toggle("dishonored",!s)})})})}),(o,f)=>(K(),B("div",{ref_key:"el",ref:l,class:"slidev-katex-wrapper"},[I(o.$slots,"default")],512))}}),$=R(D,[["__file","/Users/usami/matelier/slidev/kpoint_sampling/node_modules/@slidev/client/builtin/KaTexBlockWrapper.vue"]]);export{$ as _};
